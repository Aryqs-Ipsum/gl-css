<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gl css</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Aryqs-Ipsum/gl-css/build/gl.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/Aryqs-Ipsum/gl-css/build/gl.min.js"></script>
</head>

<body>

    <header class="top-app-bar fixed"><div class="wrapper"><div class="left"><button class="btn icon ripple js-drawer-trigger" icon="menu"></button><span class="brand">gl css</span></div><div class="right"><div class="js-circular-loader" id="router-loader"></div></div></div></header><aside class="drawer"></aside><div class="drawer-backdrop js-drawer-closable"></div><main style="padding:16px;min-height:90vh"></main>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/vs2015.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.5.0/build/highlight.min.js"></script>
    <script>
    const routes = [
        { path: '/guide/quickstart', icon: 'get_app', label: 'Quickstart' },
        { path: '/components/lists', icon: 'list', label: 'Lists' },
    ]

    const main = document.querySelector('main');
    const drawer = document.querySelector('aside.drawer');
    const loader = document.getElementById('router-loader');
    const parseLocation = () => location.hash.slice(1).toLowerCase() || '/';

    const renderDrawer = (path = '/') => {
        var drawerDom = '';
        routes.forEach(r => {
            drawerDom += 
            `<a href="#${r.path}">
                <div id="item-guide-quickstart" role="button" class="item ${path == r.path ? 'active' : ''}">
                    <i class="material-icons">${r.icon}</i>
                    <span>${r.label}</span>
                </div>
            </a>`;
        })
        drawer.innerHTML = drawerDom;
    }
    
    const router = () => {
        const path = parseLocation();
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function (data) {
            if(xhr.readyState === XMLHttpRequest.DONE) {
                var status = xhr.status;
                loader.style.display = 'none';
                if (status === 0 || (status >= 200 && status < 400)) {
                    main.innerHTML = marked(data.srcElement.responseText);
                    main.classList.remove('loading');
                    renderDrawer(path);
                    document.querySelectorAll('pre code').forEach(c => {
                        hljs.highlightBlock(c);
                    });
                } else {
                    main.innerHTML = "<h1>Error ...</h1>"
                }
            }     
        }
        xhr.open('GET', `docs${path}.md`);
        xhr.send();
        loader.style.display = 'block'; main.innerHTML = ''; main.classList.add('loading');
    };

    window.addEventListener('hashchange', router);
    window.addEventListener('load', router);
    </script>

</body></html>